<html><head><base href="https://example.com" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÊåëÊàò</title>
<style>
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --primary-color: #8A2BE2;
  --secondary-color: #4B0082;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: #000;
  color: #fff;
  overflow: hidden;
}

.mobile-container {
  position: relative;
  max-width: 430px;
  height: 100vh;
  height: calc(100vh - var(--safe-area-inset-top) - var(--safe-area-inset-bottom));
  margin: 0 auto;
  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
  overflow-y: auto;
  overflow-x: hidden;
  padding: calc(10px + var(--safe-area-inset-top)) 15px calc(65px + var(--safe-area-inset-bottom));
  box-sizing: border-box;
}

.challenge-page {
  position: relative;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
  overflow-y: auto;
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.page-header {
  padding: 20px;
  text-align: left;
}

.page-header h2 {
  font-size: 24px;
  color: #fff;
}

.challenge-categories {
  display: flex;
  gap: 10px;
  padding: 10px 0;
  margin-bottom: 15px;
  overflow-x: auto;
  scrollbar-width: none;
}

.category {
  flex-shrink: 0;
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.category.active {
  background: var(--primary-color);
}

.category-icon {
  font-size: 20px;
}

.challenge-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
  padding: 0 15px;
}

.challenge-card {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(138, 43, 226, 0.1));
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(5px);
  padding: 15px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.challenge-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.challenge-card.completed {
  background: rgba(138, 43, 226, 0.2);
}

.challenge-difficulty {
  position: absolute;
  top: 10px;
  right: 10px;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: bold;
}

.difficulty-easy {
  background: rgba(76, 175, 80, 0.2);
  color: #4CAF50;
}

.difficulty-medium {
  background: rgba(255, 152, 0, 0.2);
  color: #FF9800;
}

.difficulty-hard {
  background: rgba(244, 67, 54, 0.2);
  color: #F44336;
}

.challenge-type-indicator {
  display: flex;
  align-items: center;
  gap: 5px;
  margin-bottom: 8px;
}

.challenge-type-tag {
  padding: 2px 6px;
  border-radius: 8px;
  font-size: 11px;
  background: rgba(255, 255, 255, 0.1);
}

.challenge-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 10px;
}

.challenge-title {
  font-size: 16px;
  font-weight: bold;
  margin-bottom: 5px;
}

.challenge-desc {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 15px;
}

.challenge-duration {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  margin-left: auto;
}

.vip-bonus {
  color: #FFD700;
  margin-left: 5px;
}

.tasks-container {
  margin: 10px 0;
}

.task-item {
  margin: 8px 0;
}

.task-info {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 4px;
}

.task-progress-bar {
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

.task-progress-fill {
  height: 100%;
  background: var(--primary-color);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.challenge-progress {
  margin: 15px 0;
}

.progress-bar {
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #4CAF50, #8BC34A);
  border-radius: 4px;
  transition: width 0.3s ease;
}

.progress-text {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.8);
  margin-top: 5px;
  text-align: right;
}

.challenge-reward {
  background: rgba(255, 255, 255, 0.05);
  padding: 10px;
  border-radius: 8px;
  margin-top: 15px;
}

.challenge-reward-title {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 5px;
}

.reward-item {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 5px;
}

.rare-reward {
  animation: glow 2s infinite;
}

@keyframes glow {
  0%, 100% { filter: brightness(1); }
  50% { filter: brightness(1.3); }
}

.social-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.participants {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
}

.time-limit {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
}

.challenge-reward {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 10px;
}

.reward-icon {
  font-size: 20px;
}

.reward-amount {
  font-size: 14px;
  color: var(--primary-color);
}

.shine-effect {
  position: absolute;
  top: 0;
  left: -100%;
  width: 50px;
  height: 100%;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.3) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  transform: skewX(-20deg);
  animation: shine 2s infinite;
}

@keyframes shine {
  from { left: -100%; }
  to { left: 200%; }
}

.completion-animation {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 40px;
  opacity: 0;
  pointer-events: none;
}

@keyframes complete {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
  50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
}

.custom-challenge-header {
  padding: 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.custom-challenge-header h3 {
  margin-bottom: 10px;
}

#custom-slots-info {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 10px 0;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.8);
}

.upgrade-btn {
  padding: 5px 10px;
  background: var(--primary-color);
  border: none;
  border-radius: 15px;
  color: white;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.upgrade-btn:hover {
  background: var(--secondary-color);
}

.add-challenge-btn {
  width: 100%;
  padding: 12px;
  background: rgba(255, 255, 255, 0.1);
  border: 2px dashed rgba(255, 255, 255, 0.3);
  border-radius: 8px;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.add-challenge-btn:hover {
  background: rgba(255, 255, 255, 0.15);
}

.custom-challenge-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #1a1a2e;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 400px;
  max-height: 90vh;
  overflow-y: auto;
  z-index: 1000;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.form-group {
  margin-bottom: 15px;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  color: rgba(255, 255, 255, 0.8);
}

.form-group input,
.form-group select {
  width: 100%;
  padding: 8px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  color: white;
}

.subtask-list {
  margin: 10px 0;
}

.subtask-item {
  background: rgba(255, 255, 255, 0.05);
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 10px;
}

.time-settings {
  display: flex;
  gap: 10px;
  margin-top: 5px;
}
</style>
</head>
<body>
<div class="mobile-container">
  <div class="challenge-page">
    <header class="page-header">
      <h2>ÊåëÊàò</h2>
    </header>

    <div class="challenge-categories">
      <div class="category active" data-category="daily">
        <span class="category-icon">üìÖ</span>
        <span>ÊØèÊó•ÊåëÊàò</span>
      </div>
      <div class="category" data-category="growth">
        <span class="category-icon">üìà</span>
        <span>ËøûÁª≠ÊåëÊàò</span>
      </div>
      <div class="category" data-category="community">
        <span class="category-icon">üéØ</span>
        <span>ÁâπÊÆäÊåëÊàò</span>
      </div>
      <div class="category" data-category="custom">
        <span class="category-icon">‚úèÔ∏è</span>
        <span>Ëá™ÂÆö‰πâÊåëÊàò</span>
      </div>
      <div class="category" data-category="vip">
        <span class="category-icon">üëë</span>
        <span>VIPÊåëÊàò</span>
      </div>
    </div>

    <div class="challenge-list current" id="daily-challenges">
      <!-- Daily challenges will be populated here -->
    </div>

    <div class="challenge-list" id="growth-challenges" style="display: none;">
      <!-- Growth challenges will be populated here -->
    </div>
    
    <div class="challenge-list" id="community-challenges" style="display: none;">
      <!-- Community challenges will be populated here --> 
    </div>

    <div class="challenge-list" id="custom-challenges" style="display: none;">
      <div class="custom-challenge-header">
        <h3>Ëá™ÂÆö‰πâÊåëÊàò</h3>
        <div id="custom-slots-info">
          <span>ÂèØÁî®ÊßΩ‰Ωç: 1/1</span>
          <button id="upgrade-slots" class="upgrade-btn">ÂçáÁ∫ßËß£ÈîÅÊó†ÈôêÊßΩ‰Ωç</button>
        </div>
        <button id="add-custom-challenge" class="add-challenge-btn">
          <span>+</span> ÂàõÂª∫Êñ∞ÊåëÊàò
        </button>
      </div>
      <div id="custom-challenges-list"></div>
    </div>

    <div class="challenge-list" id="vip-challenges" style="display: none;">
      <!-- VIP challenges will be populated here -->
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  initializeChallenges();
  initializeCustomChallenges();
  
  // Add category switching functionality
  const categories = document.querySelectorAll('.category');
  categories.forEach(category => {
    category.addEventListener('click', () => {
      // Remove active class from all categories
      categories.forEach(c => c.classList.remove('active'));
      // Add active class to clicked category
      category.classList.add('active');
      
      // Hide all challenge lists
      document.querySelectorAll('.challenge-list').forEach(list => {
        list.style.display = 'none';
      });
      
      // Show the selected category's challenges
      const categoryType = category.dataset.category;
      const challengeList = document.getElementById(`${categoryType}-challenges`);
      if (challengeList) {
        challengeList.style.display = 'block';
      }
    });
  });
});

let customChallenges = [];
const isVipUser = false; // This should be set based on user's actual status

function initializeCustomChallenges() {
  const addButton = document.getElementById('add-custom-challenge');
  
  addButton.addEventListener('click', () => {
    if (!isVipUser && customChallenges.length >= 1) {
      showUpgradePrompt();
      return;
    }
    showCustomChallengeModal();
  });
}

function showUpgradePrompt() {
  // Implementation of upgrade prompt
  alert('ÂçáÁ∫ßÂà∞ VIP ‰ª•Ëß£ÈîÅÊó†ÈôêÂà∂Ëá™ÂÆö‰πâÊåëÊàòÊßΩ‰ΩçÔºÅ');
}

function showCustomChallengeModal() {
  const modal = document.createElement('div');
  modal.className = 'custom-challenge-modal';
  modal.innerHTML = `
    <h3>ÂàõÂª∫Ëá™ÂÆö‰πâÊåëÊàò</h3>
    <form id="custom-challenge-form">
      <div class="form-group">
        <label>ÊåëÊàòÂêçÁß∞</label>
        <input type="text" name="title" required>
      </div>
      
      <div class="form-group">
        <label>ÊåÅÁª≠Â§©Êï∞</label>
        <input type="number" name="duration" min="1" required>
      </div>
      
      <div class="form-group">
        <label>Â≠ê‰ªªÂä°</label>
        <div id="subtasks-container"></div>
        <button type="button" id="add-subtask">Ê∑ªÂä†Â≠ê‰ªªÂä°</button>
      </div>
      
      <div class="form-actions">
        <button type="submit">ÂàõÂª∫ÊåëÊàò</button>
        <button type="button" id="cancel-custom">ÂèñÊ∂à</button>
      </div>
    </form>
  `;

  const overlay = document.createElement('div');
  overlay.className = 'modal-overlay';
  
  document.body.appendChild(overlay);
  document.body.appendChild(modal);
  
  initializeCustomChallengeForm();
}

function initializeCustomChallengeForm() {
  const form = document.getElementById('custom-challenge-form');
  const addSubtaskBtn = document.getElementById('add-subtask');
  const cancelBtn = document.getElementById('cancel-custom');
  
  addSubtaskBtn.addEventListener('click', () => addSubtaskField());
  cancelBtn.addEventListener('click', closeModal);
  
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    
    const challenge = {
      id: 'custom-' + Date.now(),
      title: formData.get('title'),
      duration: parseInt(formData.get('duration')),
      subtasks: getSubtasks(),
      created: new Date(),
      type: 'custom'
    };
    
    addCustomChallenge(challenge);
    closeModal();
  });
  
  // Add initial subtask field
  addSubtaskField();
}

function addSubtaskField() {
  const container = document.getElementById('subtasks-container');
  const subtaskDiv = document.createElement('div');
  subtaskDiv.className = 'subtask-item';
  subtaskDiv.innerHTML = `
    <input type="text" placeholder="Â≠ê‰ªªÂä°ÂêçÁß∞" required>
    <div class="time-settings">
      <select class="repeat-type">
        <option value="daily">ÊØèÊó•ÈáçÂ§ç</option>
        <option value="time">Êó∂Èó¥ÊÆµ</option>
      </select>
      <input type="number" placeholder="ÈáçÂ§çÊ¨°Êï∞" class="repeat-count">
      <input type="time" class="time-start" style="display:none">
      <input type="time" class="time-end" style="display:none">
    </div>
    <button type="button" class="remove-subtask">Âà†Èô§</button>
  `;
  
  container.appendChild(subtaskDiv);
  
  // Add event listeners for the new subtask
  const repeatType = subtaskDiv.querySelector('.repeat-type');
  const repeatCount = subtaskDiv.querySelector('.repeat-count');
  const timeStart = subtaskDiv.querySelector('.time-start');
  const timeEnd = subtaskDiv.querySelector('.time-end');
  
  repeatType.addEventListener('change', (e) => {
    if (e.target.value === 'time') {
      repeatCount.style.display = 'none';
      timeStart.style.display = 'block';
      timeEnd.style.display = 'block';
    } else {
      repeatCount.style.display = 'block';
      timeStart.style.display = 'none';
      timeEnd.style.display = 'none';
    }
  });
}

function getSubtasks() {
  const subtasks = [];
  const subtaskElements = document.querySelectorAll('.subtask-item');
  
  subtaskElements.forEach(element => {
    const name = element.querySelector('input[type="text"]').value;
    const type = element.querySelector('.repeat-type').value;
    const settings = type === 'daily' 
      ? { repeatCount: element.querySelector('.repeat-count').value }
      : { 
          timeStart: element.querySelector('.time-start').value,
          timeEnd: element.querySelector('.time-end').value
        };
    
    subtasks.push({ name, type, settings });
  });
  
  return subtasks;
}

function addCustomChallenge(challenge) {
  customChallenges.push(challenge);
  updateCustomChallengesList();
}

function updateCustomChallengesList() {
  const container = document.getElementById('custom-challenges-list');
  container.innerHTML = '';
  
  customChallenges.forEach(challenge => {
    const card = createChallengeCard({
      ...challenge,
      description: `ÊåÅÁª≠${challenge.duration}Â§©ÁöÑËá™ÂÆö‰πâÊåëÊàò`,
      tasks: challenge.subtasks.map(subtask => ({
        name: subtask.name,
        progress: 0,
        total: subtask.type === 'daily' ? subtask.settings.repeatCount : 1,
        unit: subtask.type === 'daily' ? 'Ê¨°' : 'ÂÆåÊàê'
      }))
    });
    
    container.appendChild(card);
  });
}

function closeModal() {
  document.querySelector('.custom-challenge-modal').remove();
  document.querySelector('.modal-overlay').remove();
}

function initializeChallenges() {
  const challenges = {
    daily: [
      {
        id: 'daily1',
        title: 'ÊØèÊó•ÁôªÂΩïÊåëÊàò',
        description: 'ÊØèÊó•ÁôªÂΩïÊ∏∏Êàè‰∏ÄÊ¨°',
        tasks: [
          { name: 'ÊØèÊó•ÁôªÂΩï', progress: 1, total: 1, unit: 'Ê¨°' }
        ],
        reward: { icon: 'ü™ô', amount: '50ÈáëÂ∏Å' },
        type: 'daily',
        duration: '1Â§©',
        difficulty: 'easy',
        challengeType: 'daily',
        participants: 10
      },
      {
        id: 'daily2',
        title: 'ÊØèÊó•‰ªªÂä°ÊåëÊàò',
        description: 'ÂÆåÊàê‰ªªÊÑè1‰∏™Êó•Â∏∏‰ªªÂä°',
        tasks: [
          { name: 'ÂÆåÊàêÊó•Â∏∏‰ªªÂä°', progress: 0, total: 1, unit: '‰∏™' }
        ],
        reward: { icon: 'ü™ô', amount: '100ÈáëÂ∏Å' },
        type: 'daily',
        duration: '1Â§©',
        difficulty: 'medium',
        challengeType: 'daily',
        participants: 5
      },
      {
        id: 'daily3',
        title: 'ÊØèÊó•ÂàÜ‰∫´ÊåëÊàò',
        description: 'ÂàÜ‰∫´Ê∏∏ÊàèËá≥Á§æ‰∫§Âπ≥Âè∞1Ê¨°',
        tasks: [
          { name: 'ÂàÜ‰∫´Ê∏∏Êàè', progress: 0, total: 1, unit: 'Ê¨°' }
        ],
        reward: { icon: 'ü™ô', amount: '30ÈáëÂ∏Å' },
        type: 'daily',
        duration: '1Â§©',
        difficulty: 'hard',
        challengeType: 'daily',
        participants: 8
      }
    ],
    continuous: [
      {
        id: 'continuous1',
        title: 'ËøûÁª≠7Â§©ÁôªÂΩïÊåëÊàò',
        description: 'ËøûÁª≠ÁôªÂΩï7Â§©',
        tasks: [
          { name: 'ËøûÁª≠ÁôªÂΩï', progress: 3, total: 7, unit: 'Â§©' }
        ],
        reward: { icon: 'üëï', amount: '500ÈáëÂ∏Å + ÁÜäÁå´ÊúçË£Ö' },
        type: 'continuous',
        duration: '7Â§©',
        difficulty: 'medium',
        challengeType: 'weekly',
        participants: 20
      },
      {
        id: 'continuous2',
        title: 'ËøûÁª≠14Â§©‰ªªÂä°ÊåëÊàò',
        description: 'ËøûÁª≠14Â§©ÂÆåÊàê‰ªªÂä°',
        tasks: [
          { name: 'ËøûÁª≠ÂÆåÊàê‰ªªÂä°', progress: 5, total: 14, unit: 'Â§©' }
        ],
        reward: { icon: 'üéÅ', amount: '800ÈáëÂ∏Å + ÈÅìÂÖ∑' },
        type: 'continuous',
        duration: '14Â§©',
        difficulty: 'medium',
        challengeType: 'weekly',
        participants: 15
      },
      {
        id: 'continuous3',
        title: 'ËøûÁª≠30Â§©ÊàêÈïøÊåëÊàò',
        description: 'ËøûÁª≠30Â§©ÂÆåÊàêÊàêÈïøÁ±ª‰ªªÂä°',
        tasks: [
          { name: 'ËøûÁª≠ÂÆåÊàêÊàêÈïø‰ªªÂä°', progress: 10, total: 30, unit: 'Â§©' }
        ],
        reward: { icon: '‚≠ê', amount: '1500ÈáëÂ∏Å + ËøõÂåñÁ¥†Êùê' },
        type: 'continuous',
        duration: '30Â§©',
        difficulty: 'hard',
        challengeType: 'monthly',
        participants: 25
      },
      {
        id: 'milestone1',
        title: 'ÁÜäÁå´ÁÖßÈ°æ‰∏ìÂÆ∂',
        description: 'ËøûÁª≠30Â§©ÊØèÊó•‰∫íÂä®ÁÜäÁå´Âπ∂ÂÆåÊàêÊó•Â∏∏ÈúÄÊ±Ç',
        tasks: [
          { name: 'ÊØèÊó•‰∫íÂä®', progress: 0, total: 30, unit: 'Â§©' }
        ],
        reward: { icon: 'ü™ô', amount: '300ÈáëÂ∏Å' },
        type: 'continuous',
        duration: '30Â§©',
        difficulty: 'medium',
        challengeType: 'monthly',
        participants: 15
      },
      {
        id: 'milestone2', 
        title: 'ËææÊàêÂÅ•Â∫∑ÁÆ°ÁêÜÁõÆÊ†á',
        description: 'ËøûÁª≠30Â§©ÂÆåÊàêÂÅ•Â∫∑ÁÆ°ÁêÜ‰ªªÂä°',
        tasks: [
          { name: 'ËÆ∞ÂΩïÂÅ•Â∫∑Áä∂ÊÄÅ', progress: 0, total: 30, unit: 'Â§©' },
          { name: 'ÂÆåÊàêÊó•Â∏∏‰ªªÂä°', progress: 0, total: 30, unit: 'Â§©' }
        ],
        reward: { icon: 'ü™ô', amount: '500ÈáëÂ∏Å' },
        type: 'continuous',
        duration: '30Â§©',
        difficulty: 'hard',
        challengeType: 'monthly',
        participants: 20
      },
      {
        id: 'milestone3',
        title: 'Á¥ØËÆ°ÁôªÂΩï180Â§©',
        description: 'ËøûÁª≠ÁôªÂΩï180Â§©',
        tasks: [
          { name: 'ÊØèÊó•ÁôªÂΩï', progress: 0, total: 180, unit: 'Â§©' }
        ],
        reward: { icon: 'ü™ô', amount: '1500ÈáëÂ∏Å' },
        type: 'continuous',
        duration: '180Â§©',
        difficulty: 'hard',
        challengeType: 'monthly',
        participants: 10
      }
    ],
    special: [
      {
        id: 'special1',
        title: 'ÈôêÊó∂ËäÇÊó•ÊåëÊàò',
        description: 'ÂèÇ‰∏éÈôêÊó∂ËäÇÊó•Ê¥ªÂä®Âπ∂ÂÆåÊàê‰ªªÂä°',
        tasks: [
          { name: 'ÂÆåÊàêËäÇÊó•Ê¥ªÂä®', progress: 0, total: 1, unit: 'Ê¨°' }
        ],
        reward: { icon: 'üéÑ', amount: '200ÈáëÂ∏Å + ËäÇÊó•Ë£ÖÈ•∞Áâ©' },
        type: 'special',
        duration: 'Ê¥ªÂä®ÊúüÈó¥',
        difficulty: 'easy',
        challengeType: 'special',
        participants: 12
      },
      {
        id: 'special2',
        title: 'Â•ΩÂèãÂçè‰ΩúÊåëÊàò',
        description: '‰∏éÂ•ΩÂèã‰∏ÄÂêåÂÆåÊàê‰ªªÂä°',
        tasks: [
          { name: 'ÂÆåÊàêÂçè‰Ωú‰ªªÂä°', progress: 0, total: 1, unit: 'Ê¨°' }
        ],
        reward: { icon: 'ü§ù', amount: '100ÈáëÂ∏Å + ÂèåÂÄçÁªèÈ™åÂç°' },
        type: 'special',
        duration: '1Â§©',
        difficulty: 'medium',
        challengeType: 'special',
        participants: 7
      },
      {
        id: 'achievement1',
        title: 'ÂÆåÁæéÁÜäÁå´ÂÖªÊàê',
        description: 'Â∞ÜÁÜäÁå´ÂüπÂÖªÂà∞ÊúÄÈ´òÊàêÈïøÈò∂ÊÆµÔºàÂÆåÁæéÂΩ¢ÊÄÅÔºâ',
        tasks: [
          { name: 'ÂüπÂÖªÁÜäÁå´Ëá≥ÂÆåÁæéÂΩ¢ÊÄÅ', progress: 0, total: 1, unit: 'Ê¨°' }
        ],
        reward: { icon: 'ü™ô', amount: '500ÈáëÂ∏Å' },
        type: 'special',
        duration: '‰∏çÈôêÊó∂',
        difficulty: 'hard',
        challengeType: 'special',
        participants: 25
      },
      {
        id: 'achievement2',
        title: 'ËµÑÊ∫êÊî∂ÈõÜÂ∑®Âå†',
        description: 'Á¥ØËÆ°Êî∂ÈõÜ5000Á´πÂ≠êËµÑÊ∫ê',
        tasks: [
          { name: 'Êî∂ÈõÜÁ´πÂ≠ê', progress: 0, total: 5000, unit: '‰∏™' }
        ],
        reward: { icon: 'ü™ô', amount: '300ÈáëÂ∏Å' },
        type: 'special',
        duration: '‰∏çÈôêÊó∂',
        difficulty: 'medium',
        challengeType: 'special',
        participants: 30
      },
      {
        id: 'achievement3',
        title: 'Á§æ‰∫§Âêç‰∫∫',
        description: '‰∏é50‰Ωç‰∏çÂêåÁé©ÂÆ∂ËøõË°å‰∫íÂä®',
        tasks: [
          { name: 'Áé©ÂÆ∂‰∫íÂä®', progress: 0, total: 50, unit: 'Ê¨°' }
        ],
        reward: { icon: 'ü™ô', amount: '200ÈáëÂ∏Å' },
        type: 'special',
        duration: '‰∏çÈôêÊó∂',
        difficulty: 'medium',
        challengeType: 'special',
        participants: 40
      },
      {
        id: 'achievement4',
        title: 'Â§ßÂÆóÊî∂ÈõÜËÄÖ',
        description: 'Á¥ØËÆ°Êî∂ÈõÜ20000Á´πÂ≠ê',
        tasks: [
          { name: 'Êî∂ÈõÜÁ´πÂ≠ê', progress: 0, total: 20000, unit: '‰∏™' }
        ],
        reward: { icon: 'ü™ô', amount: '1000ÈáëÂ∏Å' },
        type: 'special',
        duration: '‰∏çÈôêÊó∂',
        difficulty: 'hard',
        challengeType: 'special',
        participants: 15
      }
    ],
    vip: [
      {
        id: 'vip1',
        title: 'VIPÁ≤æËã±',
        description: 'ÊèêÂçáVIPÁ≠âÁ∫ßËá≥VIP3',
        tasks: [
          { name: 'ÊèêÂçáVIPÁ≠âÁ∫ß', progress: 0, total: 3, unit: 'Á∫ß' }
        ],
        reward: { icon: 'ü™ô', amount: '300ÈáëÂ∏Å', isRare: true },
        type: 'vip',
        duration: '‰∏çÈôêÊó∂',
        difficulty: 'medium',
        challengeType: 'vip',
        vipBonus: true,
        participants: 50
      },
      {
        id: 'vip2',
        title: 'ÊúàÂ∫¶Á´ûÊäÄÂ§ßÂ∏à',
        description: 'VIP‰∏ìÂ±ûÊúàÂ∫¶Á´ûÊäÄÊåëÊàò',
        tasks: [
          { name: 'ÂèÇ‰∏éÁ´ûÊäÄ', progress: 0, total: 10, unit: 'Âú∫' }
        ],
        reward: { icon: 'üèÜ', amount: 'ÁâπÊÆäË£ÖÂ§á + Ëç£Ë™âÁÇπÊï∞', isRare: true },
        type: 'vip',
        duration: '30Â§©',
        difficulty: 'hard',
        challengeType: 'vip',
        vipBonus: true,
        participants: 30
      }
    ]
  };

  // Add a new category tab for VIP challenges
  const categoriesContainer = document.querySelector('.challenge-categories');
  const vipCategory = document.createElement('div');
  vipCategory.className = 'category';
  vipCategory.dataset.category = 'vip';
  vipCategory.innerHTML = `
    <span class="category-icon">üëë</span>
    <span>VIPÊåëÊàò</span>
  `;
  categoriesContainer.appendChild(vipCategory);

  // Add VIP challenges container
  const challengePage = document.querySelector('.challenge-page');
  const vipChallengesDiv = document.createElement('div');
  vipChallengesDiv.className = 'challenge-list';
  vipChallengesDiv.id = 'vip-challenges';
  vipChallengesDiv.style.display = 'none';
  challengePage.appendChild(vipChallengesDiv);

  // Populate challenges for each category including VIP
  document.getElementById('daily-challenges').innerHTML = 
    challenges.daily.map(challenge => createChallengeCard(challenge)).join('');
  document.getElementById('growth-challenges').innerHTML = 
    challenges.continuous.map(challenge => createChallengeCard(challenge)).join('');
  document.getElementById('community-challenges').innerHTML = 
    challenges.special.map(challenge => createChallengeCard(challenge)).join('');
  document.getElementById('vip-challenges').innerHTML = 
    challenges.vip.map(challenge => createChallengeCard(challenge)).join('');
}

function createChallengeCard(challenge) {
  const totalProgress = challenge.tasks.reduce((acc, task) => acc + (task.progress / task.total), 0);
  const averageProgress = (totalProgress / challenge.tasks.length) * 100;
  const isCompleted = averageProgress >= 100;
  
  const tasksHTML = challenge.tasks.map(task => {
    const taskProgress = (task.progress / task.total) * 100;
    return `
      <div class="task-item">
        <div class="task-info">
          <span>${task.name}</span>
          <span>${task.progress}/${task.total}${task.unit ? ` ${task.unit}` : ''}</span>
        </div>
        <div class="task-progress-bar">
          <div class="task-progress-fill" style="width: ${taskProgress}%"></div>
        </div>
      </div>
    `;
  }).join('');

  const difficultyClass = `difficulty-${challenge.difficulty || 'medium'}`;
  
  const timeRemaining = challenge.endTime ? getTimeRemaining(challenge.endTime) : '';

  const typeIndicators = {
    competitive: 'üèÜ Á´ûÊäÄ',
    cooperative: 'ü§ù Âêà‰Ωú',
    special: '‚ú® ÁâπÊÆä',
    daily: 'üìÖ ÊØèÊó•',
    weekly: 'üìÖ ÊØèÂë®',
    monthly: 'üìÖ ÊØèÊúà',
    vip: 'üëë VIP'
  };
  
  const challengeTypeTag = challenge.challengeType ? 
    `<div class="challenge-type-tag">${typeIndicators[challenge.challengeType]}</div>` : '';

  return `
    <div class="challenge-card ${isCompleted ? 'completed' : ''}" data-id="${challenge.id}">
      <div class="challenge-difficulty ${difficultyClass}">
        ${challenge.difficulty || 'Medium'}
      </div>
      
      <div class="challenge-type-indicator">
        ${challengeTypeTag}
      </div>

      <div class="challenge-header">
        <div>
          <div class="challenge-title">${challenge.title}</div>
          <div class="challenge-desc">${challenge.description}</div>
        </div>
        <div class="challenge-duration">
          ${challenge.duration}
          ${challenge.vipBonus ? '<span class="vip-bonus">VIPÂä†Êàê</span>' : ''}
        </div>
      </div>
      
      <div class="tasks-container">
        ${tasksHTML}
      </div>
      
      <div class="challenge-progress">
        <div class="progress-bar">
          <div class="progress-fill" style="width: ${averageProgress}%"></div>
          ${averageProgress > 90 ? '<div class="shine-effect"></div>' : ''}
        </div>
        <div class="progress-text">${Math.floor(averageProgress)}%</div>
      </div>
      
      <div class="challenge-reward">
        <div class="challenge-reward-title">ÊåëÊàòÂ•ñÂä±</div>
        <div class="reward-item ${challenge.reward.isRare ? 'rare-reward' : ''}">
          <span class="reward-icon">${challenge.reward.icon}</span>
          <span class="reward-amount">${challenge.reward.amount}</span>
        </div>
      </div>

      <div class="social-info">
        <div class="participants">
          <span>üë•</span>
          <span>${challenge.participants || 0} ‰∫∫ÂèÇ‰∏é</span>
        </div>
        <div class="time-limit">
          <span>‚è≥</span>
          <span>${timeRemaining || challenge.duration}</span>
        </div>
      </div>
      
      ${isCompleted ? '<div class="completion-animation">üéâ</div>' : ''}
    </div>
  `;
}

// Helper function to calculate time remaining
function getTimeRemaining(endTime) {
  const now = new Date();
  const end = new Date(endTime);
  const diff = end - now;
  
  if (diff <= 0) return 'Â∑≤ÁªìÊùü';
  
  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  
  if (days > 0) return `${days}Â§©${hours}Â∞èÊó∂`;
  return `${hours}Â∞èÊó∂`;
}
</script>
</body>
</html>